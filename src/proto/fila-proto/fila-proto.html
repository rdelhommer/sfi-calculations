<template>
  <div class="fila-proto">
    <div class="fila-proto__actions">
      <dropdown-button greeting="Expand" class="fila-proto__action-button">
        <button 
            class="fila-proto__action-button" 
            click.delegate="expand()">
          All
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="expand(1)">
          Reading #1
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="expand(2)">
          Reading #2
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="expand(3)">
          Reading #3
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="expand(4)">
          Reading #4
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="expand(5)">
          Reading #5
        </button>
      </dropdown-button>
      <dropdown-button greeting="Collapse" class="fila-proto__action-button">
        <button 
            class="fila-proto__action-button" 
            click.delegate="collapse()">
          All
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="collapse(1)">
          Reading #1
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="collapse(2)">
          Reading #2
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="collapse(3)">
          Reading #3
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="collapse(4)">
          Reading #4
        </button>
        <button 
            class="fila-proto__action-button"
            click.delegate="collapse(5)">
          Reading #5
        </button>
      </dropdown-button>
      <button click.delegate="addField()" class="fila-proto__action-button">
        Add Field
      </button>
      <button click.delegate="removeField()" class="fila-proto__action-button">
        Remove Field
      </button>
    </div>
    <h1>Filamentous and Protozoan Organisms</h1>
    <div class="fila-proto__organism-container" repeat.for="organism of organisms">
      <h2 class="fila-proto__organism-header">${organism.organismName}</h2>
      <reading-v2 
          repeat.for="reading of organism.readings"
          organism-name.one-time="organism.organismName"
          reading-number.bind="$index + 1"
          reading.bind="reading"
          fungi-color-enum.one-time="organism.FungiColorEnum"
          on-edit-field.call="collectData(readingNumber, fieldNumber, organism)"
          on-add-field.call="addField()"
          on-remove-field.call="removeField()"
          is-expanded.bind="isReadingExpanded[$index]">
      </reading-v2>
      <biomass 
          organism.bind="organism"
          update-flag.bind="updateFlag"></biomass>
    </div>
  </div>

  <div style="margin-top:40px">
      NOTE:
      <br/>
      Biomass calculations will be real-time calculations of the biomass mean and standard deviation (big green and gray columns on far right of spreadsheet)
  </div>
  
</template>